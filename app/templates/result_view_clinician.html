{% extends "base.html" %}
{% block content %}

<div class="clinical-container">

    <!-- ===================== -->
    <!-- TOP 3 RISK -->
    <!-- ===================== -->
    <div class="section-card">

        <div class="section-header">
            TOP 3 RISK DISEASES
        </div>

        <table class="clinical-table">
            <tr>
                <th>DISEASE</th>
                <th>RISK</th>
                <th>MAIN CAUSE</th>
            </tr>

            {% for d in ai.top3 %}
            <tr>
                <td>{{ d.name }}</td>
                <td>{{ d.percent }}%</td>
                <td>{{ d.main_cause }}</td>
            </tr>
            {% endfor %}
        </table>

    </div>


    <!-- ===================== -->
    <!-- VITAL STATUS -->
    <!-- ===================== -->
    <div class="section-card">

        <div class="section-header">
            VITAL STATUS ANALYSIS
        </div>

        <table class="clinical-table">
            <tr>
                <th>FACTOR</th>
                <th>VALUE</th>
                <th>STATUS</th>
            </tr>

            <tr>
                <td>Systolic BP</td>
                <td>{{ visit.systolic_bp }}</td>
                <td>
                    {% if visit.systolic_bp > 140 %}
                        มากเกิน
                    {% elif visit.systolic_bp < 100 %}
                        น้อยเกิน
                    {% else %}
                        พอดี
                    {% endif %}
                </td>
            </tr>

            <tr>
                <td>Fasting Glucose</td>
                <td>{{ visit.fasting_glucose }}</td>
                <td>
                    {% if visit.fasting_glucose > 126 %}
                        มากเกิน
                    {% elif visit.fasting_glucose < 70 %}
                        น้อยเกิน
                    {% else %}
                        พอดี
                    {% endif %}
                </td>
            </tr>

            <tr>
                <td>BMI</td>
                <td>{{ visit.bmi }}</td>
                <td>
                    {% if visit.bmi > 30 %}
                        มากเกิน
                    {% elif visit.bmi < 18.5 %}
                        น้อยเกิน
                    {% else %}
                        พอดี
                    {% endif %}
                </td>
            </tr>
        </table>

    </div>


    <!-- ===================== -->
    <!-- LIFESTYLE -->
    <!-- ===================== -->
    <div class="section-card">

        <div class="section-header center">
            LIFESTYLE RECOMMENDED
        </div>

        <div class="no-bullet-list">
            {% for item in ai.lifestyle %}
                <div class="life-item">{{ item }}</div>
            {% endfor %}
        </div>

    </div>


    <!-- ===================== -->
    <!-- RISK PROJECTION -->
    <!-- ===================== -->
    <div class="section-card">

        <div class="section-header center">
            RISK PROJECTION
        </div>

        <div class="projection-box">
            <div>
                Current 10-Year Risk:
                <strong>{{ ai.simulation.current }}%</strong>
            </div>

            <div>
                After Lifestyle Adjustment:
                <strong>{{ ai.simulation.after_lifestyle }}%</strong>
            </div>

            <div>
                Confidence:
                <strong>{{ (ai.confidence * 100) | round(1) }}%</strong>
            </div>
        </div>

    </div>


    <div class="disclaimer">
        Clinical Decision Support Only. AI-based modeling for assistance purposes.
    </div>

</div>

{% endblock %}